!function(h,v){h.fn.yith_wcbk_people_selector=function(t){var o=this,l=h(this),n=!1,a="",e=!1,s={main:!1,open:!1,close:!1,toggle:!1,widget:h(".yith_wcbk_booking_product_form_widget")},i=function(){v.addEventListener("click",b,!0);var e=l.attr("id"),e=!!e&&h('label[for="'+e+'"]');l.on("open",d),l.on("close",u),n.on("change",_),e&&e.length&&e.on("click",function(){s.toggle.trigger("click")})},c=function(){var e=l.data("min"),n=l.data("max");o.min=void 0!==e&&parseInt(e,10),o.max=void 0!==n&&parseInt(n,10)},r=function(){a=l.find(t.totals_selector)||"",e=l.find(t.fieldsContainer_selector)||"",n=l.find(t.field_selector)||!1,s.main=l.find("."+t["class"]),s.open=l.find(t.openHandler_selector),s.close=l.find(t.closeHandler_selector),s.toggle=l.find(t.toggleHandler_selector),p(),n&&n.each(function(){h(this).yith_wcbk_people_selector_field({canIncreaseGlobal:function(){return!1===o.max||o.value<o.max},canDecreaseGlobal:function(){return!1===o.min||o.value>o.min},onUpdate:function(){n.trigger("enableDisableButtons")}})})},p=function(){var e=0;n&&n.each(function(){e+=parseInt(h(this).yith_wcbk_people_selector_field("getValue"))}),o.value=e},_=function(e){var n=e||!0;p(),e=1<o.value?t.plural_label.replace("%s",o.value.toString()):1===o.value?t.singular_label:t.zero_label,a.text(e),n&&l.trigger("change")},d=function(){l.removeClass(t.closed_class).addClass(t.opened_class),e&&e.show(),t.onOpen()},u=function(){l.removeClass(t.opened_class).addClass(t.closed_class),e&&e.hide(),t.onClose()},f=function(e){"object"==typeof e&&"undefined"!=typeof e.stopPropagation&&e.stopPropagation(),(l.hasClass(t.opened_class)?u:d)()},b=function(e){s.close.length&&s.close.get(0).contains(e.target)?u():s.open.length&&s.open.get(0).contains(e.target)?d():s.toggle.length&&s.toggle.get(0).contains(e.target)?f():l.get(0).contains(e.target)||u()},g={zero_label:yith_people_selector_params.i18n_zero_person,singular_label:yith_people_selector_params.i18n_one_person,plural_label:yith_people_selector_params.i18n_more_persons,"class":"yith-wcbk-people-selector",totals_selector:".yith-wcbk-people-selector__totals",closeHandler_selector:".yith-wcbk-people-selector__close-handler",openHandler_selector:".yith-wcbk-people-selector__open-handler",toggleHandler_selector:".yith-wcbk-people-selector__toggle-handler",fieldsContainer_selector:".yith-wcbk-people-selector__fields-container",field_selector:".yith-wcbk-people-selector__field",opened_class:"yith-wcbk-people-selector--opened",closed_class:"yith-wcbk-people-selector--closed",onOpen:function(){},onClose:function(){}};return t=h.extend({},g,t),o.val=function(){return o.value},o.value=0,c(),r(),i(),_(!1),u(),l},h.fn.yith_wcbk_people_selector_field=function(e){var t=this,o=h(this),l=!1,a=!1,n=!1,s=!1,i=function(){l=o.find(t.options.value_selector)||!1,a=o.find(t.options.total_selector)||!1,n=o.find(t.options.plus_selector)||!1,s=o.find(t.options.minus_selector)||!1},c=function(){o.on("click",t.options.plus_selector,function(){t.canIncrease()&&u()}),o.on("click",t.options.minus_selector,function(){t.canDecrease()&&d()}),o.on("enableDisableButtons",t.enableDisableButtons)},r=function(){var e=o.data("min"),n=o.data("max");t.min=void 0!==e&&parseInt(e),t.max=void 0!==n&&parseInt(n)},p=function(e,n){l&&void 0!==e&&(e=e,!1!==t.min&&(e=Math.max(t.min,parseInt(e))),!1!==t.max&&(e=Math.min(t.max,parseInt(e))),e=parseInt(e),l.val(e),o.data("value",e),n=void 0===(e=n)||e,e=_(),a&&a.text(e),l&&l.val(e),n&&l.trigger("change"),t.enableDisableButtons(),t.options.onUpdate())},_=function(){var e=0;return l&&(e=l.val()||0),parseInt(e)},d=function(e){var n=void 0===e||isNaN(e)?1:parseInt(e),e=_(),n=parseInt(n);p(e-n)},u=function(e){var n=void 0===e||isNaN(e)?1:parseInt(e),e=_(),n=parseInt(n);p(e+n)},f={value_selector:".yith-wcbk-people-selector__field__value",total_selector:".yith-wcbk-people-selector__field__total",plus_selector:".yith-wcbk-people-selector__field__plus",minus_selector:".yith-wcbk-people-selector__field__minus",buttonDisabledClass:"yith-wcbk-people-selector__field__button--disabled",canIncreaseGlobal:function(){return!0},canDecreaseGlobal:function(){return!0},onUpdate:function(){}};return t.canIncrease=function(){var e=!0;return!1!==t.max&&(e=_()<t.max),e&&t.options.canIncreaseGlobal()},t.canDecrease=function(){var e=!0;return!1!==t.min&&(e=_()>t.min),e&&t.options.canDecreaseGlobal()},t.enableDisableButtons=function(){t.canIncrease()?n.removeClass(t.options.buttonDisabledClass):n.addClass(t.options.buttonDisabledClass),t.canDecrease()?s.removeClass(t.options.buttonDisabledClass):s.addClass(t.options.buttonDisabledClass)},"getValue"===(e=void 0!==e?e:{})?o.data("value")||0:(t.options=h.extend({},f,e),r(),i(),c(),p(_(),!1),o)}}(jQuery,(window,document));