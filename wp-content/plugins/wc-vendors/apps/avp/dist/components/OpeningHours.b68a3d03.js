import{d as E,L,r as R,o,a as u,w as d,u as e,c as y,_ as m,N as c,F as v,Z as f,P as g}from"../common/vendor.d81eb0ee.js";import{Z as $,c as h}from"../main.93ffca59.js";import{a6 as w,ae as O,S as j}from"../common/VendorStore.c0428353.js";import{x as A,y as D,v as F,w as K}from"../common/antd.bb16c729.js";import{P as Z}from"../common/index.033703c1.js";import{S as q}from"../common/VendorEdit.c4dff8e1.js";import{T as G}from"../common/index.d226d532.js";import"../common/initDefaultProps.ddfd9383.js";import"../common/_plugin-vue_export-helper.c27b6911.js";import"../common/index.76fac504.js";import"../common/responsiveObserve.6e1022f8.js";const le=E({__name:"OpeningHours",setup(J){var C,b,S;const T=$(),U=window.wcv_avp.opening_times,_=window.wcv_avp.opening_days,{vendorSettings:p,openingHoursColumns:I}=L(T);p.value.store_opening_hours=Array.isArray((C=p.value)==null?void 0:C.store_opening_hours)?(b=p.value)==null?void 0:b.store_opening_hours:[];const H=(S=p.value)==null?void 0:S.store_opening_hours,V=h("confirmRemove"),l=R([]),k=U.map(a=>{let n=Object.keys(a);return{value:n[0],label:a[n[0]]}}),N=Object.keys(_).map(a=>({value:a,label:_[a]})),B=a=>{l.value.indexOf(a)===-1?l.value.push(a):l.value.splice(l.value.indexOf(a),1)},P=a=>{var n,t;(t=(n=p.value)==null?void 0:n.store_opening_hours)==null||t.splice(a,1)},z=()=>{var a,n,t,s;(n=(a=p.value)==null?void 0:a.store_opening_hours)==null||n.push({day:"sunday",open:"00:00",close:"23:30",status:"1"}),l.value.push(((s=(t=p.value)==null?void 0:t.store_opening_hours)==null?void 0:s.length)-1)},x=a=>{let n=k.find(s=>s.value===a);return n?n.label:""};return(a,n)=>(o(),u(e(G),{columns:e(I),dataSource:e(H),pagination:!1,rowKey:t=>t.day,bordered:"",tableLayout:"auto"},{headerCell:d(({column:t})=>[t.dataIndex==="actions"?(o(),u(e(w),{key:0,type:"primary",size:"middle",onClick:n[0]||(n[0]=s=>z())},{default:d(()=>[y(e(A))]),_:1})):m("",!0)]),bodyCell:d(({record:t,column:s,index:r})=>[s.dataIndex==="day"?(o(),c(v,{key:0},[l.value.includes(r)?(o(),u(e(O),{key:0,options:e(N),value:t.day,"onUpdate:value":i=>t.day=i,style:{width:"100px"}},null,8,["options","value","onUpdate:value"])):(o(),c(v,{key:1},[f(g(e(_)[t.day]),1)],64))],64)):s.dataIndex==="open"?(o(),c(v,{key:1},[l.value.includes(r)?(o(),u(e(O),{key:0,options:e(k),value:t.open,"onUpdate:value":i=>t.open=i,style:{width:"100px"}},null,8,["options","value","onUpdate:value"])):(o(),c(v,{key:1},[f(g(x(t.open)),1)],64))],64)):s.dataIndex==="close"?(o(),c(v,{key:2},[l.value.includes(r)?(o(),u(e(O),{key:0,options:e(k),value:t.close,"onUpdate:value":i=>t.close=i,style:{width:"100px"}},null,8,["options","value","onUpdate:value"])):(o(),c(v,{key:1},[f(g(x(t.close)),1)],64))],64)):m("",!0),s.dataIndex==="actions"?(o(),u(e(j),{key:3,size:"small"},{default:d(()=>[y(e(w),{onClick:i=>B(r)},{default:d(()=>[l.value.includes(r)?(o(),u(e(D),{key:0})):(o(),u(e(F),{key:1}))]),_:2},1032,["onClick"]),l.value.includes(r)?m("",!0):(o(),u(e(Z),{key:0,title:e(V),onConfirm:i=>P(r),okText:e(h)("ok"),cancelText:e(h)("cancel")},{default:d(()=>[y(e(w),{danger:""},{default:d(()=>[y(e(K))]),_:1})]),_:2},1032,["title","onConfirm","okText","cancelText"]))]),_:2},1024)):s.dataIndex==="status"?(o(),u(e(q),{key:4,size:"small",checked:t.status,"onUpdate:checked":i=>t.status=i,checkedValue:"1",unCheckedValue:"0"},null,8,["checked","onUpdate:checked"])):m("",!0)]),_:1},8,["columns","dataSource","rowKey"]))}});export{le as default};
